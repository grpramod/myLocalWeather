var weatherApp=angular.module("weather",[]);weatherApp.controller("showWeather",["$scope","$http",function(e,t){e.weatherResp="",e.units="F";e.convertUnits=function(t,a){e.units=a,angular.element(t.target).hasClass("active")||("C"===a?(e.weatherResp.main.temp=Math.round(5/9*(e.weatherResp.main.temp-32)),angular.forEach(e.weatherForecastResp.list,function(t,a){e.weatherForecastResp.list[a].temp.day=Math.round(5/9*(e.weatherForecastResp.list[a].temp.day-32))})):"F"===a&&(e.weatherResp.main.temp=9*e.weatherResp.main.temp/5+32,angular.forEach(e.weatherForecastResp.list,function(t,a){e.weatherForecastResp.list[a].temp.day=9*e.weatherForecastResp.list[a].temp.day/5+32})))};var a=function(t){switch(t.code){case t.PERMISSION_DENIED:e.error="User denied the request for Geolocation.";break;case t.POSITION_UNAVAILABLE:e.error="Location information is unavailable.";break;case t.TIMEOUT:e.error="The request to get user location timed out.";break;case t.UNKNOWN_ERROR:e.error="An unknown error occurred.";break;default:e.error="An unknown error occurred."}e.$apply()},r=function(e,a,r){t.get(e).success(function(e){a(e),console.log(JSON.stringify(e))}).error(function(e){r(e)})},o=function(t){e.weatherResp=t,window.chrome.browserAction.setBadgeText({text:e.weatherResp.main.temp.toString()})},n=function(t){e.weatherForecastResp=t},i=function(t){var i=t.coords.latitude,s=t.coords.longitude;e.$apply(),r("http://api.openweathermap.org/data/2.5/weather?lat="+i+"&lon="+s+"&appid=708518532a791afde6d31d0fa4783fbf&units=imperial",o,a),r("http://api.openweathermap.org/data/2.5/forecast/daily?lat="+i+"&lon="+s+"&appid=708518532a791afde6d31d0fa4783fbf&units=imperial",n,a)};!function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(i,a):e.error="Geolocation is not supported by this browser."}()}]),weatherApp.filter("convertDate",function(){return function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(void 0!==e)return t[new Date(1e3*e).getDay()]}});